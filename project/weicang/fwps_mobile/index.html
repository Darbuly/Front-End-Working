<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport"
		content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">

	<link rel="stylesheet" href="../../../lib/runCommon/yw_global.css">

	<!-- vue -->
	<script src="../../../lib/vue/vue_2.6.11.js"></script>

	<!-- vant -->
	<link rel="stylesheet" href="../../../lib/vant/index.css">
	<script src="../../../lib/vant/vant.min.js"></script>

	<!-- rem.js -->
	<script src="../../../lib/remJS/rem.js"></script>
	<!-- jq -->
	<script src="../../../lib/jquery/jquery.min.js"></script>
	<!-- FastVue -->
	<script src="../../../lib/FastVue/FastVue.js"></script>


	<style>
		body {
			background: #fff;
		}

		/* 标签头样式 start */
		.van-tabs__line {
			display: none;
		}

		.van-tabs--line .van-tabs__wrap {
			height: 2.34rem;
		}

		.van-tabs--line .van-tabs__nav {
			background-color: #343740;
		}

		.van-tabs--line .van-tab {
			font-size: 0.32rem;
			font-weight: bold;
			color: #d0d4d9;
		}



		.van-tabs--line .van-tab:first-child {
			margin-left: 0.64rem;
		}


		.van-tabs--line .van-tab--active {
			font-size: 0.6rem;
			font-weight: bolder;
			color: #7d885b;
			line-height: 0.6rem;
		}

		/* 标签头样式 end */

		/* 时间线样式 start */
		.timeline-vant {
			margin-top: 0.4rem;
		}


		.timeline-vant-bigtitle {
			margin-left: 0.50rem;
			font-size: 0.6rem;
			font-weight: bold;
			color: #7d885b;
			line-height: 0.84rem;
		}

		.van-step--vertical:not(:last-child)::after {
			display: none;
		}

		.van-steps--vertical {
			padding: 0 0 0 0.96rem;
		}

		.van-icon-checked::before {
			content: " ";
			width: 0.22rem;
			height: 0.22rem;
			background-color: #fff;
			border: 2px solid #7d885b;
			border-radius: 50%;
		}

		.van-step__title .time {
			font-size: 0.24rem;
			color: #7d885b;
			line-height: 0.34rem;
		}

		.van-step__line {
			background-color: #7d885b;
		}

		.van-step--vertical .van-step__line {
			width: 1px;
		}

		.van-step__circle {
			width: 0.22rem;
			height: 0.22rem;
			background-color: #fff;
			border: 2px solid #7d885b;
			border-radius: 50%;
		}


		/* 时间线样式 end */

		/* 文章列表样式 start */

		.article-text-img-list-wrap .row {
			width: 100%;
			box-sizing: border-box;
			padding-top: 0.06rem;
			padding-bottom: 0.4rem;
			display: flex;
			border-bottom: 2px solid #f3f3f3;
		}

		.article-text-img-list-wrap .row:last-child {
			border-bottom: none;
		}

		.article-text-img-list-wrap .row .left {
			display: flex;
			flex-direction: column;
			margin-right: 0.51rem;
		}


		.article-text-img-list-wrap .row .left .title {
			width: 3.68rem;
			font-size: 0.28rem;
			font-weight: bold;
			color: #1e1e28;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			margin-bottom: 0.08rem;
		}

		.article-text-img-list-wrap .desc {
			font-size: .28rem;
			line-height: 0.44rem;
			overflow: hidden;
			width: 3.68rem;
			text-overflow: ellipsis;
			display: -webkit-box;
			-webkit-box-orient: vertical;
			-webkit-line-clamp: 3;
			color: #1e1e28;
		}


		.article-text-img-list-wrap .row .right {
			display: flex;
			justify-content: center;
			align-items: center;
		}

		.article-text-img-list-wrap .row .right img {
			width: 1.71rem;
			height: 1.30rem;
		}

		/* 文章列表样式 end */

		/* 文章展示样式 start */
		.article-show-weicang .title {
			width: 5.78rem;
			margin: 1.1rem auto 0.68rem;
			font-size: 0.44rem;
			font-weight: auto;
			line-height: 0.6rem;
			letter-spacing: 2px;
		}

		.article-show-weicang .body {
			width: 5.78rem;
			margin: 0 auto 1.14rem;

			font-size: 0.32rem;
			color: #ffffff;
			line-height: 0.6rem;
			letter-spacing: 2px;
		}

		.closer {
			position: fixed;
			width: 0.8rem;
			height: 0.8rem;
			background-image: url(./images/closer.svg);
			background-repeat: no-repeat;
			background-size: 100%;
			z-index: 99999999;
			top: 0.12rem;
			right: 0.12rem;
		}

		/* 文章展示样式 end */
	</style>
</head>

<body>
	<div id="container">
	</div>
</body>

<script>


	async function iniFastVue() {

		const F1 = new FastVue({
			appName: 'myFirstFastVue',
			templatePathRoot: '../../../lib/FastVue/component/'
		});
		F1.initPlugin(vant.Lazyload);

		await F1.regComponent('article-text-img', {}, {
			rowClickEvent: function () {
				console.log(this.propsdata);
				tip.show('success');
			}
		});

		await F1.regComponent('timeline-vant');

		let tip = await F1.pushComponent('#container', 'article-show-weicang', {
		})


		const mock_data = [
			{
				"id": "207",
				"title": "味仓茶园2017多出来的",
				"year": "2017",
				"month": "OCT",
				"day": "12",
				"cover_img": "/drupal/sites/t-matrix2/files/2021-07/cover-img_9.jpg",
				"article_content": "<p>味仓茶园2017多出来的味仓茶园2017多出来的味仓茶园2017多出来的味仓茶园2017多出来的味仓茶园2017多出来的味仓茶园2017多出来的味仓茶园2017多出来的味仓茶园2017多出来的味仓茶园2017多出来的味仓茶园2017多出来的</p>\n",
				"date": "2017-10-12"
			},
			{
				"id": "200",
				"title": "味仓茶园201705",
				"year": "2017",
				"month": "MAY",
				"day": "11",
				"cover_img": "/drupal/sites/t-matrix2/files/2021-07/cover-img_3.jpg",
				"article_content": "<p>味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,味仓茶园201705,</p>\n",
				"date": "2017-10-11"
			},
			{
				"id": "199",
				"title": "味仓茶园201704",
				"year": "2017",
				"month": "APR",
				"day": "04",
				"cover_img": "/drupal/sites/t-matrix2/files/2021-07/cover-img_2.jpg",
				"article_content": "<p>味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,味仓茶园201704,</p>\n",
				"date": "2017-04-04"
			},
			{
				"id": "198",
				"title": "味仓茶园201703",
				"year": "2017",
				"month": "MAR",
				"day": "03",
				"cover_img": "/drupal/sites/t-matrix2/files/2021-07/cover-img_1.jpg",
				"article_content": "<p>味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,味仓茶园201703,</p>\n",
				"date": "2017-03-03"
			},
			{
				"id": "197",
				"title": "味仓茶园201702",
				"year": "2017",
				"month": "FEB",
				"day": "02",
				"cover_img": "/drupal/sites/t-matrix2/files/2021-07/cover-img_0.jpg",
				"article_content": "<p>味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702,味仓茶园201702</p>\n",
				"date": "2017-02-02"
			},
			{
				"id": "196",
				"title": "味仓茶园201701",
				"year": "2017",
				"month": "JUNE",
				"day": "01",
				"cover_img": "/drupal/sites/t-matrix2/files/2021-07/cover-img.jpg",
				"article_content": "<p>味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701味仓茶园201701</p>\n",
				"date": "2017-01-01"
			}
		]


		let _line_list = {
			"2017": {},
			"2018": {},
			"2019": {},
			"2020": {},
			"2021": {}
		};


		let currentRows = mock_data;
		let _monthKeys = {};

		currentRows.map((item) => {

			//读取年

			if (Object.keys(_line_list[item.year]).length == 0) {
				_line_list[item.year] = {
					tab_title: "2017",
					line_list: {},
					contentComponent: 'timeline-vant'
				};
			}

			//读月
			const m = new Date(item.date).getMonth() + 1;

			if (!_line_list[item.year]['line_list'][m]) {
				_line_list[item.year]['line_list'][m] = [];
			}
			const date_split = item.date.split('-');//item.date =  "2017-03-03";



			let articleObj = {
				id: item.id,
				title: '',
				desc: item.title,
				cover: item.cover_img,
				date: `${date_split[1]}月${date_split[2]}日`,
				contentComponent: 'article-text-img'
			};
			_line_list[item.year]['line_list'][m].push(articleObj);


		})


		console.log('_line_list', _line_list);
		let list = [];

		for (let key in _line_list) {
			let line_list = [];

			for (let m in _line_list[key].line_list) {
				line_list.push({
					line_title: `${m}月`,
					list: _line_list[key].line_list[m]
				})
			}

			list.push({
				tab_title: key,
				line_list: line_list,
				contentComponent: 'timeline-vant'
			})

		}
		console.log(list);


		let tabs = await F1.pushComponent('#container', 'tabs-vant', {
			list


		})


	}
	iniFastVue()


</script>

</html>